=============================================
          POSTGRES INSTALL CONFIG
=============================================

https://www.postgresql.org/docs/current/static/tutorial.html
http://www.tutorialspoint.com/postgresql/postgresql_overview.htm
http://www.postgresqltutorial.com/

Good one - http://ktaraghi.blogspot.in/2013/08/installing-postgresql-database.html (install from  source, create db etc)
Good one - https://wiki.postgresql.org/wiki/YUM_Installation#Install_PostgreSQL
            https://wiki.postgresql.org/wiki/PostgreSQL_on_RedHat_Linux --> also links to other tutorials/blogs
            https://wiki.postgresql.org/wiki/First_steps
            
Another one - http://www.phpbuilder.com/columns/kevin20010314.php3 (install using RPMs)

======================
WHAT TO INSTALL
======================
What to install: http://yum.postgresql.org/files/PostgreSQL-RPM-Installation-PGDG.pdf

https://www.postgresql.org/docs/current/static/tutorial-install.html

=========================
<INSTALL USING SOURCE CODE>
(not using this method)
=========================
https://www.postgresql.org/docs/current/static/installation.html

==========================
INSTALL THE YUM REPO
==========================
http://yum.postgresql.org/
--> http://yum.postgresql.org/repopackages.php

How to install yum-repo (not product): https://www.postgresql.org/download/linux/redhat/#yum
How to find linux distribution/version: http://yum.postgresql.org/findingdistro.php

For RHEL:
Latest supported version:
# yum install https://download.postgresql.org/pub/repos/yum/9.5/redhat/rhel-7-x86_64/pgdg-redhat95-9.5-2.noarch.rpm

Beta version:
# yum install https://download.postgresql.org/pub/repos/yum/9.6/redhat/rhel-7-x86_64/pgdg-redhat96-9.6-1.noarch.rpm

For Oracle Linux:
Latest supported version:
# yum install https://download.postgresql.org/pub/repos/yum/9.5/redhat/rhel-7-x86_64/pgdg-oraclelinux95-9.5-2.noarch.rpm

Beta version:
# yum install https://download.postgresql.org/pub/repos/yum/9.6/redhat/rhel-6-x86_64/pgdg-oraclelinux96-9.6-1.noarch.rpm

==================================
INDIVIDUAL RPMs - DIRECT DOWNLOAD
==================================
Somehow I got this site: 
http://yum.postgresql.org/9.5/redhat/rhel-7-x86_64/repoview/postgresqldbserver95.group.html

How I got there, is given below:

https://www.postgresql.org/download/
--> https://www.postgresql.org/download/linux/redhat/  (has basic yum install postgres-server steps also)
--> --> Look for ' repository RPM listing' - 
        --> http://yum.postgresql.org/repopackages.php (repository yum - covered in the 'install yum repo' section above
--> --> Look for 'direct download' - http://yum.postgresql.org/rpmchart.php
        --> In this, choose 9.5	RHEL/CentOS/Scientific Linux/Oracle Linux 7 - x86_64
            --> http://yum.postgresql.org/9.5/redhat/rhel-7-x86_64/repoview/
                --> In that, search for 'PostgreSQL Database Server 9.5 PGDG' 
                      - http://yum.postgresql.org/9.5/redhat/rhel-7-x86_64/repoview/postgresqldbserver95.group.html
            

Admin tools: (like pgadmin3)
https://www.pgadmin.org/download/

==================================
PRE-REQUISITES
==================================
https://www.postgresql.org/docs/9.5/static/install-requirements.html

===========================================
PREINSTALLED IN CERTAIN LINUX DISTRIBUTIONS
(by choosing that option during install)
===========================================
https://www.postgresql.org/download/linux/redhat/

Included in distribution

These distributions all include PostgreSQL by default. 

To install PostgreSQL from these repositories, use the yum command:  (from the Redhat repo - not PGDG repo)
yum install postgresql-server

Which version of PostgreSQL you get will depend on the version of the distribution:

Distribution	Version
RHEL/CentOS/SL/OL 7	9.2
RHEL/CentOS/SL/OL 6	8.4(also supplies package postgresql92)
RHEL/CentOS/SL/OL 5	8.1 (also supplies package postgresql84)
Fedora 22	9.4
Fedora 21	9.3
Fedora 20	9.3

Other Red Hat family distributions may ship a different version of PostgreSQL by default, check with your distribution vendor to be sure.

- WHAT ALL TO INSTALL  (yum install postgresql-server only installs the server. There is more stuff to install)
The repository contains many different packages including third party addons. 

The most common and important packages are (substitute the version number as required):

postgresql-client libraries and client binaries
postgresql-server core database server
postgresql-contrib additional supplied modules
postgresql-devel libraries and headers for C language development
pgadmin3 - pgAdmin III graphical administration utility

- Post-installation

Due to policies for Red Hat family distributions, the PostgreSQL installation will not be enabled for automatic start or have the database initialized automatically. To make your database installation complete, you need to perform these two steps:

service postgresql initdb
chkconfig postgresql on
or, on Fedora 19 and other later derived distributions:
postgresql-setup initdb
systemctl enable postgresql.service

================================
INSTALL LATEST VERSION - yum using repo installed earlier
================================
Also see some help/leads in Ubuntu community - https://help.ubuntu.com/community/PostgreSQL
http://ktaraghi.blogspot.in/2013/08/installing-postgresql-database.html

----------------
What to install 
----------------
From the PREINSTALLED IN CERTAIN LINUX DISTRIBUTIONS section above
postgresql-server core database server (installs the client and libs also)
postgresql-client libraries and client binaries  (this is postgresql and postgresql-lib gets installed along with postgresql-server)
postgresql-contrib additional supplied modules
postgresql-devel libraries and headers for C language development
pgadmin3 - pgAdmin III graphical administration utility

From http://www.phpbuilder.com/columns/kevin20010314.php3
1) Required Files:
A) postgresql-server-7.0.2-17.i386.rpm
B) postgresql-7.0.2-17.i386.rpm
C) php-pgsql-4.0.1pl2-9.i386.rpm 
 
2) Optional Files:
A) postgresql-devel-7.0.2-17.i386.rpm
B) postgresql-jdbc-7.0.2-17.i386.rpm
C) postgresql-odbc-7.0.2-17.i386.rpm
D) postgresql-perl-7.0.2-17.i386.rpm
E) postgresql-python-7.0.2-17.i386.rpm
F) postgresql-tcl-7.0.2-17.i386.rpm (I highly recommend this)
G) postgresql-tk-7.0.2-17.i386.rpm (This is part of the above)
H) phpPgAdmin_2-2-1-pl1.tar.gz (Download from

Available from yum repositories:
NOTE: you may see multiple version if you have multiple repositories configured

# yum list postgres*
Loaded plugins: product-id, rhnplugin, subscription-manager
This system is receiving updates from RHN Classic or Red Hat Satellite.
Installed Packages
postgresql95.x86_64                    9.5.3-2PGDG.rhel7            @pgdg95
postgresql95-contrib.x86_64            9.5.3-2PGDG.rhel7            @pgdg95
postgresql95-devel.x86_64              9.5.3-2PGDG.rhel7            @pgdg95
postgresql95-libs.x86_64               9.5.3-2PGDG.rhel7            @pgdg95
postgresql95-server.x86_64             9.5.3-2PGDG.rhel7            @pgdg95
Available Packages
postgresql.i686                        9.2.15-1.el7_2             ol7_latest
postgresql.x86_64                      9.2.15-1.el7_2             ol7_latest
postgresql-contrib.x86_64              9.2.15-1.el7_2             ol7_latest
postgresql-devel.i686                  9.2.15-1.el7_2             ol7_latest
postgresql-devel.x86_64                9.2.15-1.el7_2             ol7_latest
postgresql-docs.x86_64                 9.2.15-1.el7_2             ol7_latest
postgresql-jdbc.noarch                 9.4.1208-1.rhel7             pgdg95
postgresql-jdbc-javadoc.noarch         9.4.1208-1.rhel7             pgdg95
postgresql-libs.i686                   9.2.15-1.el7_2             ol7_latest
postgresql-libs.x86_64                 9.2.15-1.el7_2             ol7_latest
postgresql-odbc.x86_64                 09.03.0100-2.el7             ol7_latest
postgresql-plperl.x86_64               9.2.15-1.el7_2             ol7_latest
postgresql-plpython.x86_64             9.2.15-1.el7_2             ol7_latest
postgresql-pltcl.x86_64                9.2.15-1.el7_2             ol7_latest
postgresql-server.x86_64               9.2.15-1.el7_2             ol7_latest
postgresql-test.x86_64                 9.2.15-1.el7_2             ol7_latest
postgresql-upgrade.x86_64              9.2.13-1.el7_1             rhel7-optional-2015r3-tgt
postgresql94-jdbc.noarch               9.4.1207-2.rhel7             pgdg95
postgresql94-jdbc-javadoc.noarch       9.4.1207-2.rhel7             pgdg95
postgresql95-debuginfo.x86_64          9.5.3-2PGDG.rhel7            pgdg95
postgresql95-docs.x86_64               9.5.3-2PGDG.rhel7            pgdg95
postgresql95-odbc.x86_64               09.05.0200-1PGDG.rhel7           pgdg95
postgresql95-odbc-debuginfo.x86_64     09.03.0400-1PGDG.rhel7           pgdg95
postgresql95-plperl.x86_64             9.5.3-2PGDG.rhel7            pgdg95
postgresql95-plpython.x86_64           9.5.3-2PGDG.rhel7            pgdg95
postgresql95-pltcl.x86_64              9.5.3-2PGDG.rhel7            pgdg95
postgresql95-python.x86_64             4.2-1PGDG.rhel7             pgdg95
postgresql95-python-debuginfo.x86_64   4.2-1PGDG.rhel7             pgdg95
postgresql95-tcl.x86_64                2.0.0-1.rhel7             pgdg95
postgresql95-tcl-debuginfo.x86_64      2.0.0-1.rhel7             pgdg95
postgresql95-test.x86_64               9.5.3-2PGDG.rhel7            pgdg95


--------------
INSTALL
--------------
NOTE: This seemed to create a user postgres also
$ id postgres
uid=26(postgres) gid=26(postgres) groups=26(postgres) 

NOTE: May not be installing all things listed above

CAUTION:  Use VERSION NUMBER like postgresql95-server 
          - if you use just postgresql-server it will get it from Redhat/Oracle repo and not PGDG repo 
          -  and it could be an older/not-preferred version.

# yum install postgresql95-server
NOTE: This installs client (postgresql) and libs also

  Installing : postgresql95-libs-9.5.3-2PGDG.rhel7.x86_64 
  Installing : postgresql95-9.5.3-2PGDG.rhel7.x86_64  
  Installing : postgresql95-server-9.5.3-2PGDG.rhel7.x86_64 
  Verifying  : postgresql95-9.5.3-2PGDG.rhel7.x86_64  
  Verifying  : postgresql95-server-9.5.3-2PGDG.rhel7.x86_64 
  Verifying  : postgresql95-libs-9.5.3-2PGDG.rhel7.x86_64 

Installed:
  postgresql95-server.x86_64 0:9.5.3-2PGDG.rhel7

Dependency Installed:
  postgresql95.x86_64 0:9.5.3-2PGDG.rhel7    postgresql95-libs.x86_64 0:9.5.3-2PGDG.rhel7

If did not use version number:
          Running transaction
            Installing : postgresql-libs-9.2.15-1.el7_2.x86_64
            Installing : postgresql-9.2.15-1.el7_2.x86_64 
            Installing : postgresql-server-9.2.15-1.el7_2.x86_64 
            Verifying  : postgresql-libs-9.2.15-1.el7_2.x86_64 
            Verifying  : postgresql-server-9.2.15-1.el7_2.x86_64  
            Verifying  : postgresql-9.2.15-1.el7_2.x86_64  
          
          Installed:
            postgresql-server.x86_64 0:9.2.15-1.el7_2
          
          Dependency Installed:
            postgresql.x86_64 0:9.2.15-1.el7_2      postgresql-libs.x86_64 0:9.2.15-1.el7_2

          # rpm -qa|grep -i postg
          postgresql-server-9.2.15-1.el7_2.x86_64
          postgresql-9.2.15-1.el7_2.x86_64
          postgresql-libs-9.2.15-1.el7_2.x86_64

# yum install postgresql95-client  -->  actually, it is just 'postgresql95' which is already installed in the install above
< did not install anything >
Loaded plugins: product-id, rhnplugin, subscription-manager
This system is receiving updates from RHN Classic or Red Hat Satellite.
No package postgresql-client available.
Error: Nothing to do

# yum install postgresql95-contrib
Installed:
  postgresql95-contrib.x86_64 0:9.5.3-2PGDG.rhel7
Dependency Installed:  (this will come up if not previously installed)
  uuid.x86_64 0:1.6.2-26.el7

# yum install postgresql95-devel
Installed:
  postgresql95-devel.x86_64 0:9.5.3-2PGDG.rhel7

# yum install pgadmin3_95
NOTE: This did not get installed as it had too many dependencies
Resolving Dependencies
--> Running transaction check
---> Package pgadmin3_95.x86_64 0:1.22.1-1.rhel7 will be installed

================================
POST-INSTALLATION
================================
- MAKING IT A SERVICE (TBD)
NOTE: These steps did not work as there was no service configured after installation)
https://www.postgresql.org/download/linux/redhat/
Post-installation

Due to policies for Red Hat family distributions, the PostgreSQL installation will not be enabled for automatic start or have the database initialized automatically. To make your database installation complete, you need to perform these two steps:

service postgresql initdb
chkconfig postgresql on

or, on Fedora 19 and other later derived distributions:
postgresql-setup initdb
systemctl enable postgresql.service

================================
DIRECTORY STRUCTURE
================================
http://yum.postgresql.org/files/PostgreSQL-RPM-Installation-PGDG.pdf
https://www.postgresql.org/docs/current/static/storage-file-layout.html
https://www.postgresql.org/docs/9.4/static/storage-file-layout.html

NOTE:
Postgres server is 'postgres' which is located in /usr/pgsql-9.5/bin
It did not start automatically
Nor did it get configured as a service during installation

Table 63-1. Contents of PGDATA

Item	Description
PG_VERSION	A file containing the major version number of PostgreSQL
base	Subdirectory containing per-database subdirectories
global	Subdirectory containing cluster-wide tables, such as pg_database
pg_commit_ts	Subdirectory containing transaction commit timestamp data
pg_clog	Subdirectory containing transaction commit status data
pg_dynshmem	Subdirectory containing files used by the dynamic shared memory subsystem
pg_logical	Subdirectory containing status data for logical decoding
pg_multixact	Subdirectory containing multitransaction status data (used for shared row locks)
pg_notify	Subdirectory containing LISTEN/NOTIFY status data
pg_replslot	Subdirectory containing replication slot data
pg_serial	Subdirectory containing information about committed serializable transactions
pg_snapshots	Subdirectory containing exported snapshots
pg_stat	Subdirectory containing permanent files for the statistics subsystem
pg_stat_tmp	Subdirectory containing temporary files for the statistics subsystem
pg_subtrans	Subdirectory containing subtransaction status data
pg_tblspc	Subdirectory containing symbolic links to tablespaces
pg_twophase	Subdirectory containing state files for prepared transactions
pg_xlog	Subdirectory containing WAL (Write Ahead Log) files
postgresql.auto.conf	A file used for storing configuration parameters that are set by ALTER SYSTEM
postmaster.opts	A file recording the command-line options the server was last started with
postmaster.pid	A lock file recording the current postmaster process ID (PID), cluster data directory path, postmaster start timestamp, port number, Unix-domain socket directory path (empty on Windows), first valid listen_address (IP address or *, or empty if not listening on TCP), and shared memory segment ID (this file is not present after server shutdown)

data/base/<db oid> folder contains tables
In that:
The free space map is stored in a file named with the filenode number plus the suffix _fsm. Tables also have a visibility map, stored in a fork with the suffix _vm, to track which pages are known to have no dead tuples. The visibility map is described further in Section 63.4. Unlogged tables and indexes have a third fork, known as the initialization fork, which is stored in a fork with the suffix _init (see Section 63.5).


# cd /usr/pgsql-9.5
# ls -l
drwxr-xr-x. 2 root root 4096 Jul 12 01:04 bin
drwxr-xr-x. 3 root root 4096 Jul 12 00:59 doc
drwxr-xr-x. 6 root root 4096 Jul 12 01:04 include
drwxr-xr-x. 4 root root 4096 Jul 12 01:04 lib
drwxr-xr-x. 8 root root 4096 Jul 12 00:59 share

# cd /usr/pgsql-9.5/bin
# ls -l
-rwxr-xr-x. 1 root root   58696 May 14 17:49 clusterdb
-rwxr-xr-x. 1 root root   58744 May 14 17:49 createdb
-rwxr-xr-x. 1 root root   66904 May 14 17:49 createlang
-rwxr-xr-x. 1 root root   63264 May 14 17:49 createuser
-rwxr-xr-x. 1 root root   54456 May 14 17:49 dropdb
-rwxr-xr-x. 1 root root   66888 May 14 17:49 droplang
-rwxr-xr-x. 1 root root   54416 May 14 17:49 dropuser
-rwxr-xr-x. 1 root root  858160 May 14 17:49 ecpg
-rwxr-xr-x. 1 root root  101560 May 14 17:49 initdb
-rwxr-xr-x. 1 root root   28728 May 14 17:49 oid2name
-rwxr-xr-x. 1 root root   20144 May 14 17:49 pg_archivecleanup
-rwxr-xr-x. 1 root root   71784 May 14 17:49 pg_basebackup
-rwxr-xr-x. 1 root root   75928 May 14 17:49 pgbench
-rwxr-xr-x. 1 root root   32944 May 14 17:49 pg_config
-rwxr-xr-x. 1 root root   41056 May 14 17:49 pg_controldata
-rwxr-xr-x. 1 root root   41736 May 14 17:49 pg_ctl
-rwxr-xr-x. 1 root root  359168 May 14 17:49 pg_dump
-rwxr-xr-x. 1 root root   79832 May 14 17:49 pg_dumpall
-rwxr-xr-x. 1 root root   33424 May 14 17:49 pg_isready
-rwxr-xr-x. 1 root root   54680 May 14 17:49 pg_receivexlog
-rwxr-xr-x. 1 root root   54872 May 14 17:49 pg_recvlogical
-rwxr-xr-x. 1 root root   45320 May 14 17:49 pg_resetxlog
-rwxr-xr-x. 1 root root  146880 May 14 17:49 pg_restore
-rwxr-xr-x. 1 root root   79608 May 14 17:49 pg_rewind
-rwxr-xr-x. 1 root root   24400 May 14 17:49 pg_standby
-rwxr-xr-x. 1 root root   20408 May 14 17:49 pg_test_fsync
-rwxr-xr-x. 1 root root   16088 May 14 17:49 pg_test_timing
-rwxr-xr-x. 1 root root   96528 May 14 17:49 pg_upgrade
-rwxr-xr-x. 1 root root   70968 May 14 17:49 pg_xlogdump
-rwxr-xr-x. 1 root root 6240952 May 14 17:49 postgres
-rwxr-xr-x. 1 root root    2177 May 14 17:45 postgresql95-check-db-dir
-rwxr-xr-x. 1 root root    8695 May 14 17:45 postgresql95-setup
lrwxrwxrwx. 1 root root       8 Jul 12 00:56 postmaster -> postgres
-rwxr-xr-x. 1 root root  511272 May 14 17:49 psql
-rwxr-xr-x. 1 root root   62880 May 14 17:49 reindexdb
-rwxr-xr-x. 1 root root   63104 May 14 17:49 vacuumdb
-rwxr-xr-x. 1 root root   24416 May 14 17:49 vacuumlo

# cd /etc/alternatives
(also see in /var/lib/alternatives)
# ls -l
lrwxrwxrwx. 1 root root 45 Jul 12 00:56 pgsql-ld-conf -> /usr/pgsql-9.5/share/postgresql-9.5-libs.conf
lrwxrwxrwx. 1 root root 23 Jul 12 00:56 pgsql-psql -> /usr/pgsql-9.5/bin/psql
lrwxrwxrwx. 1 root root 28 Jul 12 00:56 pgsql-clusterdb -> /usr/pgsql-9.5/bin/clusterdb
lrwxrwxrwx. 1 root root 27 Jul 12 00:56 pgsql-createdb -> /usr/pgsql-9.5/bin/createdb
lrwxrwxrwx. 1 root root 29 Jul 12 00:56 pgsql-createlang -> /usr/pgsql-9.5/bin/createlang
lrwxrwxrwx. 1 root root 29 Jul 12 00:56 pgsql-createuser -> /usr/pgsql-9.5/bin/createuser
lrwxrwxrwx. 1 root root 25 Jul 12 00:56 pgsql-dropdb -> /usr/pgsql-9.5/bin/dropdb
lrwxrwxrwx. 1 root root 27 Jul 12 00:56 pgsql-droplang -> /usr/pgsql-9.5/bin/droplang
lrwxrwxrwx. 1 root root 27 Jul 12 00:56 pgsql-dropuser -> /usr/pgsql-9.5/bin/dropuser
lrwxrwxrwx. 1 root root 32 Jul 12 00:56 pgsql-pg_basebackup -> /usr/pgsql-9.5/bin/pg_basebackup
lrwxrwxrwx. 1 root root 26 Jul 12 00:56 pgsql-pg_dump -> /usr/pgsql-9.5/bin/pg_dump
lrwxrwxrwx. 1 root root 29 Jul 12 00:56 pgsql-pg_dumpall -> /usr/pgsql-9.5/bin/pg_dumpall
lrwxrwxrwx. 1 root root 29 Jul 12 00:56 pgsql-pg_restore -> /usr/pgsql-9.5/bin/pg_restore
lrwxrwxrwx. 1 root root 28 Jul 12 00:56 pgsql-reindexdb -> /usr/pgsql-9.5/bin/reindexdb
lrwxrwxrwx. 1 root root 27 Jul 12 00:56 pgsql-vacuumdb -> /usr/pgsql-9.5/bin/vacuumdb
lrwxrwxrwx. 1 root root 41 Jul 12 00:56 pgsql-clusterdbman -> /usr/pgsql-9.5/share/man/man1/clusterdb.1
lrwxrwxrwx. 1 root root 40 Jul 12 00:56 pgsql-createdbman -> /usr/pgsql-9.5/share/man/man1/createdb.1
lrwxrwxrwx. 1 root root 42 Jul 12 00:56 pgsql-createlangman -> /usr/pgsql-9.5/share/man/man1/createlang.1
lrwxrwxrwx. 1 root root 42 Jul 12 00:56 pgsql-createuserman -> /usr/pgsql-9.5/share/man/man1/createuser.1
lrwxrwxrwx. 1 root root 38 Jul 12 00:56 pgsql-dropdbman -> /usr/pgsql-9.5/share/man/man1/dropdb.1
lrwxrwxrwx. 1 root root 40 Jul 12 00:56 pgsql-droplangman -> /usr/pgsql-9.5/share/man/man1/droplang.1
lrwxrwxrwx. 1 root root 40 Jul 12 00:56 pgsql-dropuserman -> /usr/pgsql-9.5/share/man/man1/dropuser.1
lrwxrwxrwx. 1 root root 45 Jul 12 00:56 pgsql-pg_basebackupman -> /usr/pgsql-9.5/share/man/man1/pg_basebackup.1
lrwxrwxrwx. 1 root root 39 Jul 12 00:56 pgsql-pg_dumpman -> /usr/pgsql-9.5/share/man/man1/pg_dump.1
lrwxrwxrwx. 1 root root 42 Jul 12 00:56 pgsql-pg_dumpallman -> /usr/pgsql-9.5/share/man/man1/pg_dumpall.1
lrwxrwxrwx. 1 root root 42 Jul 12 00:56 pgsql-pg_restoreman -> /usr/pgsql-9.5/share/man/man1/pg_restore.1
lrwxrwxrwx. 1 root root 36 Jul 12 00:56 pgsql-psqlman -> /usr/pgsql-9.5/share/man/man1/psql.1
lrwxrwxrwx. 1 root root 41 Jul 12 00:56 pgsql-reindexdbman -> /usr/pgsql-9.5/share/man/man1/reindexdb.1
lrwxrwxrwx. 1 root root 40 Jul 12 00:56 pgsql-vacuumdbman -> /usr/pgsql-9.5/share/man/man1/vacuumdb.1

# cd /bin
# ls -l /bin
lrwxrwxrwx. 1 root root          28 Jul 12 00:56 psql -> /etc/alternatives/pgsql-psql
lrwxrwxrwx. 1 root root          33 Jul 12 00:56 clusterdb -> /etc/alternatives/pgsql-clusterdb
lrwxrwxrwx. 1 root root          32 Jul 12 00:56 createdb -> /etc/alternatives/pgsql-createdb
lrwxrwxrwx. 1 root root          34 Jul 12 00:56 createlang -> /etc/alternatives/pgsql-createlang
lrwxrwxrwx. 1 root root          34 Jul 12 00:56 createuser -> /etc/alternatives/pgsql-createuser
lrwxrwxrwx. 1 root root          30 Jul 12 00:56 dropdb -> /etc/alternatives/pgsql-dropdb
lrwxrwxrwx. 1 root root          32 Jul 12 00:56 droplang -> /etc/alternatives/pgsql-droplang
lrwxrwxrwx. 1 root root          32 Jul 12 00:56 dropuser -> /etc/alternatives/pgsql-dropuser
lrwxrwxrwx. 1 root root          37 Jul 12 00:56 pg_basebackup -> /etc/alternatives/pgsql-pg_basebackup
lrwxrwxrwx. 1 root root          31 Jul 12 00:56 pg_dump -> /etc/alternatives/pgsql-pg_dump
lrwxrwxrwx. 1 root root          34 Jul 12 00:56 pg_dumpall -> /etc/alternatives/pgsql-pg_dumpall
lrwxrwxrwx. 1 root root          34 Jul 12 00:56 pg_restore -> /etc/alternatives/pgsql-pg_restore
lrwxrwxrwx. 1 root root          33 Jul 12 00:56 reindexdb -> /etc/alternatives/pgsql-reindexdb
lrwxrwxrwx. 1 root root          32 Jul 12 00:56 vacuumdb -> /etc/alternatives/pgsql-vacuumdb

==========================================
START SERVER, CREATE INITIAL DATABASE ETC
==========================================
The install seems to have created a user postgres also:
$ id postgres
uid=26(postgres) gid=26(postgres) groups=26(postgres) 

-----------------------------------
FIRST STEPS
-----------------------------------
https://www.postgresql.org/docs/current/static/tutorial-createdb.html
NOTE: Executables are in /bin and /usr/pgsql-9.5/bin

- Logon to user 'postgres'
Note: Its home directory is strangely /var/lib/pgsql

Modify .bash_profile:
export PATH=$PATH:/usr/pgsql-9.5/bin

--------------------------------
- Try create a db
--------------------------------
$ createdb mydb
createdb: could not connect to database template1: could not connect to server: No such file or directory
        Is the server running locally and accepting
        connections on Unix domain socket "/var/run/postgresql/.s.PGSQL.5432"?

- Need to start the server
https://www.postgresql.org/docs/current/static/server-start.html

# service postgresql-9.5 initdb
The service command supports only basic LSB actions (start, stop, restart, try-restart, reload, force-reload, status). For other actions, please try to use systemctl.

-- Fix: run /usr/pgsql-9.5/bin/postgresql95-setup initdb 
     Taken from http://serverfault.com/questions/350045/postgresql-service-initdb-doesnt-work/484542
     or https://wiki.postgresql.org/wiki/YUM_Installation
(also see https://docs.fedoraproject.org/en-US/Fedora/16/html/Release_Notes/sect-Release_Notes-Changes_for_Sysadmin.html 
for multiple postgres instances)
# /usr/pgsql-9.5/bin/postgresql95-setup initdb
Initializing database ... OK

This will create the following files:
# ls -l /var/lib/pgsql/9.5/data  (all new files)
total 116
drwx------. 5 postgres postgres  4096 Jul 12 02:09 base
drwx------. 2 postgres postgres  4096 Jul 12 02:09 global
drwx------. 2 postgres postgres  4096 Jul 12 02:09 pg_clog
drwx------. 2 postgres postgres  4096 Jul 12 02:09 pg_commit_ts
drwx------. 2 postgres postgres  4096 Jul 12 02:09 pg_dynshmem
-rw-------. 1 postgres postgres  4224 Jul 12 02:09 pg_hba.conf
-rw-------. 1 postgres postgres  1636 Jul 12 02:09 pg_ident.conf
drwx------. 2 postgres postgres  4096 Jul 12 02:09 pg_log
drwx------. 4 postgres postgres  4096 Jul 12 02:09 pg_logical
drwx------. 4 postgres postgres  4096 Jul 12 02:09 pg_multixact
drwx------. 2 postgres postgres  4096 Jul 12 02:09 pg_notify
drwx------. 2 postgres postgres  4096 Jul 12 02:09 pg_replslot
drwx------. 2 postgres postgres  4096 Jul 12 02:09 pg_serial
drwx------. 2 postgres postgres  4096 Jul 12 02:09 pg_snapshots
drwx------. 2 postgres postgres  4096 Jul 12 02:09 pg_stat
drwx------. 2 postgres postgres  4096 Jul 12 02:09 pg_stat_tmp
drwx------. 2 postgres postgres  4096 Jul 12 02:09 pg_subtrans
drwx------. 2 postgres postgres  4096 Jul 12 02:09 pg_tblspc
drwx------. 2 postgres postgres  4096 Jul 12 02:09 pg_twophase
-rw-------. 1 postgres postgres     4 Jul 12 02:09 PG_VERSION
drwx------. 3 postgres postgres  4096 Jul 12 02:09 pg_xlog
-rw-------. 1 postgres postgres    88 Jul 12 02:09 postgresql.auto.conf
-rw-------. 1 postgres postgres 21730 Jul 12 02:09 postgresql.conf

# ls -l  (initdb.log is a new file)
total 12
drwx------.  2 postgres postgres 4096 May 14 17:45 backups
drwx------. 20 postgres postgres 4096 Jul 12 02:09 data
-rw-------.  1 postgres postgres 1324 Jul 12 02:09 initdb.log

- Start the service (fails)
# systemctl start postgresql
Failed to issue method call: Unit postgresql.service failed to load: No such file or directory.

/etc/services has postgres entry (probably default that comes with OS)
postgres        5432/tcp        postgresql      # POSTGRES
postgres        5432/udp        postgresql      # POSTGRES

-- fix - Hint from https://docs.fedoraproject.org/en-US/Fedora/16/html/Release_Notes/sect-Release_Notes-Changes_for_Sysadmin.html
Look in /lib/systemd/system for postgresql.service (the site said /lib/systemd)
# ls -l /lib/systemd/system/pos*
-rw-r--r--. 1 root root  463 Jan 26  2014 postfix.service
-rw-r--r--. 1 root root 1628 May 14 17:45 postgresql-9.5.service

Copy postgresql-9.5.service to /etc/systemd/system

--  Now try start the service (success)
NOTE: The data directory used is the default one "/usr/pgsql-9.5/bin/postgres -D /var/lib/pgsql/9.5/data"

# systemctl start postgresql-9.5
# systemctl status postgresql-9.5
postgresql-9.5.service - PostgreSQL 9.5 database server
   Loaded: loaded (/etc/systemd/system/postgresql-9.5.service; disabled)
   Active: active (running) since Tue 2016-07-12 02:34:00 CDT; 23s ago
  Process: 52785 ExecStart=/usr/pgsql-9.5/bin/pg_ctl start -D ${PGDATA} -s -w -t 300 (code=exited, status=0/SUCCESS)
  Process: 52779 ExecStartPre=/usr/pgsql-9.5/bin/postgresql95-check-db-dir ${PGDATA} (code=exited, status=0/SUCCESS)
   CGroup: /system.slice/postgresql-9.5.service
           ├─52788 /usr/pgsql-9.5/bin/postgres -D /var/lib/pgsql/9.5/data
           ├─52789 postgres: logger process
           ├─52791 postgres: checkpointer process
           ├─52792 postgres: writer process
           ├─52793 postgres: wal writer process
           ├─52794 postgres: autovacuum launcher process
           └─52795 postgres: stats collector process

Jul 12 02:33:58  systemd[1]: Starting PostgreSQL 9.5 database server...
Jul 12 02:34:00  pg_ctl[52785]: < 2016-07-12 02:34:00.009 CDT >LOG:  redirecting log output to logging collector process
Jul 12 02:34:00  pg_ctl[52785]: < 2016-07-12 02:34:00.009 CDT >HINT:  Future log output will appear in directory "pg_log".
Jul 12 02:34:00  systemd[1]: Started PostgreSQL 9.5 database server.
Jul 12 02:34:14  systemd[1]: Started PostgreSQL 9.5 database server.

# ps -ef|grep post
root      2253     1  0 May07 ?        00:00:19 /usr/libexec/postfix/master -w
postfix   2277  2253  0 May07 ?        00:00:04 qmgr -l -t fifo -u
postfix  50232  2253  0 01:52 ?        00:00:00 pickup -l -t fifo -u
postgres 52788     1  0 02:33 ?        00:00:00 /usr/pgsql-9.5/bin/postgres -D /var/lib/pgsql/9.5/data
postgres 52789 52788  0 02:33 ?        00:00:00 postgres: logger process
postgres 52791 52788  0 02:33 ?        00:00:00 postgres: checkpointer process
postgres 52792 52788  0 02:33 ?        00:00:00 postgres: writer process
postgres 52793 52788  0 02:33 ?        00:00:00 postgres: wal writer process
postgres 52794 52788  0 02:33 ?        00:00:00 postgres: autovacuum launcher process
postgres 52795 52788  0 02:33 ?        00:00:00 postgres: stats collector process
root     52810 52101  0 02:35 pts/0    00:00:00 grep --color=auto post

-- Now, enable the service to restart upon machine reboot
# systemctl enable postgresql-9.5
ln -s '/etc/systemd/system/postgresql-9.5.service' '/etc/systemd/system/multi-user.target.wants/postgresql-9.5.service'

- Create database again
Logon as postgres user
$ createdb mydb
--> THIS DID NOT ERROR OUT
--> However, where are the data files/tablespaces? (TBD)

$ dropdb mydb
$ dropdb mydb (do again to check)
dropdb: database removal failed: ERROR:  database "mydb" does not exist

--------------------------------
- Check where the DB is created
--------------------------------
http://rachbelaid.com/introduction-to-postgres-physical-storage/
DB files are created in a subdirectory under $PGDATA/base which is /var/lib/pgsql/9.5/data/base
The 'oid' of the database in pg_database view is the subdirectory under this directory for the DB.
$ ls -l /var/lib/pgsql/9.5/data/base
drwx------. 2 postgres postgres 4096 Jul 12 02:34 1
drwx------. 2 postgres postgres 4096 Jul 12 02:09 13289
drwx------. 2 postgres postgres 4096 Jul 12 02:34 13294
drwx------. 2 postgres postgres 4096 Jul 12 04:25 16387 --> this is the oid of 'mydb' (see below)

Check the current list of DB's, create a DB and check again. 
Get the 'oid' and find that subdirectory - /var/lib/pgsql/9.5/data/base/16387.

$ psql
psql (9.5.3)
Type "help" for help.

postgres=# select oid, datname from pg_database;
  oid  |  datname
-------+-----------
     1 | template1
 13289 | template0
 13294 | postgres
(3 rows)

postgres=# \q
-bash-4.2$ createdb mydb
-bash-4.2$ psql
psql (9.5.3)
Type "help" for help.

postgres=# select oid, datname from pg_database;
  oid  |  datname
-------+-----------
     1 | template1
 13289 | template0
 13294 | postgres
 16387 | mydb
(4 rows)

Alternatively, run oid2name command line command:
$ oid2name mydb
All databases:
    Oid  Database Name  Tablespace
----------------------------------
  16387           mydb  pg_default
  13294       postgres  pg_default
  13289      template0  pg_default
      1      template1  pg_default

----------------------
List the files of a DB
----------------------
NOTE: This has repeating file-name patterns as in the listing below.

$ ls -l /var/lib/pgsql/9.5/data/base/16387
-rw-------. 1 postgres postgres   8192 Jul 12 04:25 112
-rw-------. 1 postgres postgres   8192 Jul 12 04:25 113
-rw-------. 1 postgres postgres  65536 Jul 12 04:25 1247
-rw-------. 1 postgres postgres  24576 Jul 12 04:25 1247_fsm
-rw-------. 1 postgres postgres   8192 Jul 12 04:25 1247_vm
-rw-------. 1 postgres postgres 368640 Jul 12 04:25 1249
-rw-------. 1 postgres postgres  24576 Jul 12 04:25 1249_fsm
-rw-------. 1 postgres postgres   8192 Jul 12 04:25 1249_vm
-rw-------. 1 postgres postgres 581632 Jul 12 04:25 1255
-rw-------. 1 postgres postgres  24576 Jul 12 04:25 1255_fsm
-rw-------. 1 postgres postgres   8192 Jul 12 04:25 1255_vm
-rw-------. 1 postgres postgres 106496 Jul 12 04:25 1259
-rw-------. 1 postgres postgres  24576 Jul 12 04:25 1259_fsm
-rw-------. 1 postgres postgres   8192 Jul 12 04:25 1259_vm
-rw-------. 1 postgres postgres  57344 Jul 12 04:25 13125
-rw-------. 1 postgres postgres  24576 Jul 12 04:25 13125_fsm
-rw-------. 1 postgres postgres   8192 Jul 12 04:25 13125_vm
-rw-------. 1 postgres postgres      0 Jul 12 04:25 13127
-rw-------. 1 postgres postgres   8192 Jul 12 04:25 13129
-rw-------. 1 postgres postgres   8192 Jul 12 04:25 13130
-rw-------. 1 postgres postgres  24576 Jul 12 04:25 13130_fsm
-rw-------. 1 postgres postgres   8192 Jul 12 04:25 13130_vm
-rw-------. 1 postgres postgres      0 Jul 12 04:25 13132
-rw-------. 1 postgres postgres   8192 Jul 12 04:25 13134
-rw-------. 1 postgres postgres   8192 Jul 12 04:25 13135
-rw-------. 1 postgres postgres  24576 Jul 12 04:25 13135_fsm
-rw-------. 1 postgres postgres   8192 Jul 12 04:25 13135_vm

--------------------------
CREATE TABLES
--------------------------
- List and choose a DB:
http://www.tutorialspoint.com/postgresql/postgresql_select_database.htm
Logon as postgres
$ psql
postgres=# \l
                                  List of databases
   Name    |  Owner   | Encoding |   Collate   |    Ctype    |   Access privileges
-----------+----------+----------+-------------+-------------+-----------------------
 mydb      | postgres | UTF8     | en_US.UTF-8 | en_US.UTF-8 |
 postgres  | postgres | UTF8     | en_US.UTF-8 | en_US.UTF-8 |
 template0 | postgres | UTF8     | en_US.UTF-8 | en_US.UTF-8 | =c/postgres          +
           |          |          |             |             | postgres=CTc/postgres
 template1 | postgres | UTF8     | en_US.UTF-8 | en_US.UTF-8 | =c/postgres          +
           |          |          |             |             | postgres=CTc/postgres
(4 rows)

postgres=# \c mydb
You are now connected to database "mydb" as user "postgres".
mydb=#

- Create table
http://www.tutorialspoint.com/postgresql/postgresql_create_table.htm
CREATE TABLE table_name(
   column1 datatype,
   column2 datatype,
   column3 datatype,
   .....
   columnN datatype,
   PRIMARY KEY( one or more columns )
);

mydb=# CREATE TABLE EMP (id int, name varchar(20), primary key (id));

- List tables in the db
mydb=# \d
        List of relations
 Schema | Name | Type  |  Owner
--------+------+-------+----------
 public | emp  | table | postgres
(1 row)

- Describe a table
mydb=# \d emp
             Table "public.emp"
 Column |         Type          | Modifiers
--------+-----------------------+-----------
 id     | integer               | not null
 name   | character varying(20) |
Indexes:
    "emp_pkey" PRIMARY KEY, btree (id)
    
- Drop table
http://www.tutorialspoint.com/postgresql/postgresql_drop_table.htm
mydb=# drop table emp;
DROP TABLE --> indicates it was successful
mydb=# \d
No relations found.

mydb=#  drop table emp;
ERROR:  table "emp" does not exist

- Where is a table stored on disk
mydb=# select pg_relation_filepath('emp');
 pg_relation_filepath
----------------------
 base/16387/16393


-------------------------------------
CONSTRAINTS
-------------------------------------
http://www.tutorialspoint.com/postgresql/postgresql_constraints.htm
NOT NULL
Unique key
Primary key
Foreign key
Check constraint
Exclusion constraint : The EXCLUDE constraint ensures that if any two rows are compared on the specified column(s) 
                       or expression(s) using the specified operator(s), not all of these comparisons will return TRUE.

-------------------------------
CREATE SCHEMA
-------------------------------
http://www.tutorialspoint.com/postgresql/postgresql_schema.htm
postgres=# \c mydb
You are now connected to database "mydb" as user "postgres".
mydb=# create schema myschema;
CREATE SCHEMA
mydb=# create table myschema.emp(empid int, empname varchar(20));
CREATE TABLE
mydb=# \d
        List of relations
 Schema | Name | Type  |  Owner
--------+------+-------+----------
 public | emp  | table | postgres
(1 row)

mydb=# \d myschema
Did not find any relation named "myschema".
mydb=# insert into emp (1,'1');
ERROR:  syntax error at or near "1"
LINE 1: insert into emp (1,'1');
                         ^
mydb=# insert into emp values (1,'1');
INSERT 0 1
mydb=# insert into myschema.emp values (10, '10');
INSERT 0 1
mydb=# select * from emp;
 id | name
----+------
  1 | 1
(1 row)

mydb=# select * from myschema.emp;
 empid | empname
-------+---------
    10 | 10
(1 row)

- To find where they are stored:
mydb=# select pg_relation_filepath('emp');
 pg_relation_filepath
----------------------
 base/16387/16393
(1 row)

mydb=# select pg_relation_filepath('myschema.emp');
 pg_relation_filepath
----------------------
 base/16387/16398

--------------------------
WHERE ARE TABLES STORED
--------------------------
http://rachbelaid.com/introduction-to-postgres-physical-storage/
https://www.postgresql.org/docs/current/static/storage-file-layout.html
https://www.postgresql.org/docs/9.5/static/storage-file-layout.html

data/base/<db oid> folder contains tables
In that:
The free space map is stored in a file named with the filenode number plus the suffix _fsm. Tables also have a visibility map, stored in a fork with the suffix _vm, to track which pages are known to have no dead tuples. The visibility map is described further in Section 63.4. Unlogged tables and indexes have a third fork, known as the initialization fork, which is stored in a fork with the suffix _init (see Section 63.5).

First, where is the DB stored:
postgres=# select oid, datname from pg_database;
  oid  |  datname
-------+-----------
     1 | template1
 13289 | template0
 13294 | postgres
 16387 | mydb

Next, where is the table stored:
http://rachbelaid.com/introduction-to-postgres-physical-storage/
Choose a DB and query pg_relation_filepath for a table in it.
For a schema-table search for schema.table.
NOTE: the files  base/16387/16393, base/16387/16398 are individual files, not with extensions like _vm, _fsm etc
NOTE: If the table grows beyonod 1GB, it gets split into 1GB segments

mydb=#\c mydb

mydb=# select pg_relation_filepath('emp');
 pg_relation_filepath
----------------------
 base/16387/16393


mydb=# select pg_relation_filepath('myschema.emp');
 pg_relation_filepath
----------------------
 base/16387/16398

=======================================
CUSTOM DATA DIRECTORY
=======================================
==== TBD FOR LATER - cutomize data directory ===
# mkdir /disk1/data/postgres
# chown postgres:postgres /disk1/data/postgres
# sudo su - postgres

Now work under id postgres
set environment PGDATA or pass the data directory with -D to postgres executable

$ postgres -D /disk1/data/postgres
 
=========================================================
SYSTEM TABLES - CATALOG (LIKE DATA DICTIONARY OF ORACLE)
=========================================================
http://rachbelaid.com/introduction-to-postgres-physical-storage/

Each DB has a pg_catalog schema that is the catalog.

postgres=# \c mydb
You are now connected to database "mydb" as user "postgres".
mydb=# \dt pg_catalog.*
                    List of relations
   Schema   |          Name           | Type  |  Owner
------------+-------------------------+-------+----------
 pg_catalog | pg_aggregate            | table | postgres
 pg_catalog | pg_am                   | table | postgres
 pg_catalog | pg_amop                 | table | postgres
 pg_catalog | pg_amproc               | table | postgres
 pg_catalog | pg_attrdef              | table | postgres
 pg_catalog | pg_attribute            | table | postgres
...
...


=============================
PSQL NOTES
=============================
- Extended display
postgres=# \x
Expanded display is on.
postgres=# \l
List of databases
-[ RECORD 1 ]-----+----------------------
Name              | mydb
Owner             | postgres
Encoding          | UTF8
Collate           | en_US.UTF-8
Ctype             | en_US.UTF-8
Access privileges |
-[ RECORD 2 ]-----+----------------------
Name              | postgres
Owner             | postgres
Encoding          | UTF8
Collate           | en_US.UTF-8
Ctype             | en_US.UTF-8
Access privileges |
-[ RECORD 3 ]-----+----------------------
Name              | template0
Owner             | postgres
Encoding          | UTF8
Collate           | en_US.UTF-8
Ctype             | en_US.UTF-8
Access privileges | =c/postgres          +
                  | postgres=CTc/postgres
-[ RECORD 4 ]-----+----------------------
Name              | template1
Owner             | postgres
Encoding          | UTF8
Collate           | en_US.UTF-8
Ctype             | en_US.UTF-8
Access privileges | =c/postgres          +
                  | postgres=CTc/postgres






